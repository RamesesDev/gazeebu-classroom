import com.rameses.annotations.*;


class FeedbackService {
	
	@Service("EmailService")
	def emailSvc;
	
	@Service("DateService")
	def dateSvc;
	
	@Env
	def env;
	
	static final def ADMIN_EMAILS = ['jaycverg@gmail'];


	@ProxyMethod
	public void send( param ) {
		def m = [:];
		m.subject = "Gazeebu Feedback from $env.lastname, $env.firstname";
		m.message = """
			<b>Message:</b>
			<p>
				$param.comment
			</p>
			<br/>
			<br/>
			Posted by: $env.lastname, $env.firstname
			<br/>
			Date Posted: $dateSvc.serverDate
		""";	
		m.recipients = ADMIN_EMAILS;
		emailSvc.send(m);
	}
	
}